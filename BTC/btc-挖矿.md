# 全节点和轻节点

## 全节点
- 一直在线
- 在本地硬盘中维护完整的区块链信息
- 在内存中维护 UTXO 集合，以便快速检验交易的正确性
- 监听比特币网络上的交易信息，验证每个交易的合法性
- 决定哪些交易会被打包到区块里
- 监听别的矿工挖出来的区块，并验证合法性
  - 交易合法（铸币的金额）
  - 是否符合难度要求
  - 检查难度目标阈值是否正确
  - 是否挂接着最长合法链
- 挖矿
  - 决定沿着哪条路挖下去？最长？最短？出现分叉，选择哪个？
 
## 轻节点
- 不是一直在线的
- 不用保存整个区块链信息，而只用保存每个区块的块头
- 不用保存全部交易，只保存与自己相关的交易
- 无法验证大多数交易合法性，只能检验与自己相关的那些
- 无法验证网上发布的区块正确性
- 可以验证挖矿的难度
- 只能坚持哪个是最长链，无法知道哪个是最长合法链

# 激励机制

之前的理论中，我们假设大部分节点是诚实节点，那么问题来了，为什么我要做诚实节点，我想变坏行不行？

在比特币网络中，共有两个激励方式。一种是Block reward（区块奖励），一种是transaction fees（交易费用）。

区块奖励是这样的
> 任何创造出区块的节点可以在区块中包括一个特殊的交易——创造币的交易，并且节点可以选择交易的接收地址。当然， 节点大概率把接收地址设置为自己。可以理解为这是对节点创造区块的奖励。
> 最开始的时候，创造一个区块的奖励是50个币，然后每210,000个区块这个数字会减半。按照生成区块的速度，差不多每四年，区块奖励会减半。目前应该是创造一个区块奖励6.5个比特币。
> 同时，区块奖励也是唯一的创建新的比特币的方法。从下图可以看出，每四年比特币的区块奖励降低一半，比特币系统中币的总数设置在21,000，000。也即，总有一天，创建区块不会产生新的币，或者币回报太少，而没有人愿意去创建区块。

交易费用
> 比特币中的第二个激励机制是交易费用。交易的创建者可以在创建交易时，输入大于输出，其中的差值就是交易费用。所以，即使当创建区块不会产生币的时候，交易费用会变得很重要。同时，对于交易者而言，如果希望自己的交易被快速地确认，毫无疑问地，在交易中包括多一点的费用是一个好的方法。
> 这时候有个问题，创造新区块的节点是随机的，我们给创造区块的节点奖励，这样就会有更多节点希望参与进来，那会不会有节点发动女巫攻击，创造很多的节点来获得奖励？解决问题的办法就是POW。比特币挑选了一种不能独占的资源，即算力作为区块的工作量证明，攻击者必须控制足够的算力资源才能参与到区块的创建之中。
